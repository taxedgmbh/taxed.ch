import{j as e,m as c,h as C,A as b,u as f,v as N,w}from"./vendor-ui-d2783dd2.js";import{r as x,L as k}from"./vendor-react-57c46751.js";import{H as z}from"./vendor-helmet-fe330b15.js";import{a as T,u as _,i as q,f as m,B as s}from"./main-72022c1b.js";import{C as h,c as P,d as A,a as E,b as H}from"./card-86ba6987.js";import"./vendor-firebase-cb809cd2.js";const B=()=>{const{cartItems:a,removeFromCart:u,updateQuantity:l,clearCart:i,getCartTotal:o}=T(),{toast:r}=_(),p=x.useCallback(async()=>{if(a.length===0){r({title:"Your cart is empty",description:"Add some products to your cart before checking out.",variant:"destructive"});return}try{const t=a.map(d=>({variant_id:d.variant.id,quantity:d.quantity})),n=`${window.location.origin}/success`,j=window.location.href,{url:v}=await q({items:t,successUrl:n,cancelUrl:j});i(),window.location.href=v}catch(t){r({title:"Checkout Error",description:t.message||"There was a problem initializing checkout. Please try again.",variant:"destructive"})}},[a,i,r]),g=t=>{u(t.variant.id),r({title:"Item Removed",description:`${t.product.title} has been removed from your cart.`})},y=x.useMemo(()=>{const t=o(),n=a.length>0?a[0].variant.currency:null;return m(t,n)},[o,a]);return e.jsxs(e.Fragment,{children:[e.jsxs(z,{children:[e.jsx("title",{children:"Your Cart | Taxed GmbH"}),e.jsx("meta",{name:"description",content:"Review and manage items in your shopping cart."})]}),e.jsx("section",{className:"py-20 bg-light-gray-bg-1",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx(c.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-12",children:e.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-dark-gray mb-6",children:"Your Shopping Cart"})}),a.length===0?e.jsxs(c.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"text-center",children:[e.jsx(C,{className:"mx-auto h-24 w-24 text-gray-300"}),e.jsx("p",{className:"mt-4 text-xl text-dark-gray",children:"Your cart is empty."}),e.jsx(s,{asChild:!0,className:"mt-6 bg-steel-blue hover:bg-steel-blue/90 text-white",children:e.jsx(k,{to:"/store",children:"Continue Shopping"})})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[e.jsx("div",{className:"lg:col-span-2 space-y-4",children:e.jsx(b,{children:a.map(t=>e.jsx(c.div,{layout:!0,initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:50,transition:{duration:.3}},children:e.jsxs(h,{className:"flex items-center p-4",children:[e.jsx("img",{src:t.product.image,alt:t.product.title,className:"w-24 h-24 object-cover rounded-md border mr-4"}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg text-dark-gray",children:t.product.title}),e.jsx("p",{className:"text-sm text-gray-600",children:t.variant.title}),e.jsxs("div",{className:"flex items-center border border-gray-200 rounded-md w-fit mt-2",children:[e.jsx(s,{onClick:()=>l(t.variant.id,Math.max(1,t.quantity-1)),size:"sm",variant:"ghost",className:"px-2 text-gray-600 hover:bg-gray-100 h-8",children:e.jsx(f,{size:14})}),e.jsx("span",{className:"px-3 text-dark-gray font-medium",children:t.quantity}),e.jsx(s,{onClick:()=>l(t.variant.id,t.quantity+1),size:"sm",variant:"ghost",className:"px-2 text-gray-600 hover:bg-gray-100 h-8",children:e.jsx(N,{size:14})})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-lg text-steel-blue",children:m(t.variant.sale_price_in_cents??t.variant.price_in_cents,t.variant.currency)}),e.jsx(s,{variant:"ghost",size:"icon",className:"text-gray-500 hover:text-brand-red mt-2",onClick:()=>g(t),children:e.jsx(w,{className:"h-4 w-4"})})]})]})},t.variant.id))})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(h,{className:"sticky top-24",children:[e.jsx(P,{children:e.jsx(A,{children:"Order Summary"})}),e.jsx(E,{children:e.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:y})]})}),e.jsxs(H,{className:"flex-col space-y-4",children:[e.jsx(s,{className:"w-full bg-brand-red hover:bg-brand-red/90 text-white",size:"lg",onClick:p,children:"Proceed to Checkout"}),e.jsx(s,{variant:"outline",className:"w-full",onClick:()=>{i(),r({title:"Cart Cleared",description:"All items have been removed from your cart."})},children:"Clear Cart"})]})]})})]})]})})]})};export{B as default};
