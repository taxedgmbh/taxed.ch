import{a5 as b,w as N,C as m,aF as f,aG as x,l as e,G as w,b as n,O as C,a as s,m as k,T as z,Z as T,a0 as _,a1 as q}from"./main-3d4d0525.js";import{o as h,i as Y,m as $,n as R,l as F}from"./card-9f228cfb-82863c12.js";const S=()=>{const{cartItems:t,removeFromCart:u,updateQuantity:c,clearCart:r,getCartTotal:o}=b(),{toast:i}=N(),g=m.useCallback(async()=>{if(t.length===0){i({title:"Your cart is empty",description:"Add some products to your cart before checking out.",variant:"destructive"});return}try{const a=t.map(d=>({variant_id:d.variant.id,quantity:d.quantity})),l=`${window.location.origin}/success`,j=window.location.href,{url:v}=await f({items:a,successUrl:l,cancelUrl:j});r(),window.location.href=v}catch(a){i({title:"Checkout Error",description:a.message||"There was a problem initializing checkout. Please try again.",variant:"destructive"})}},[t,r,i]),p=a=>{u(a.variant.id),i({title:"Item Removed",description:`${a.product.title} has been removed from your cart.`})},y=m.useMemo(()=>{const a=o(),l=t.length>0?t[0].variant.currency:null;return x(a,l)},[o,t]);return e.jsxs(e.Fragment,{children:[e.jsxs(w,{children:[e.jsx("title",{children:"Your Cart | Taxed GmbH"}),e.jsx("meta",{name:"description",content:"Review and manage items in your shopping cart."})]}),e.jsx("section",{className:"py-20 bg-light-gray-bg-1",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx(n.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-12",children:e.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-dark-gray mb-6",children:"Your Shopping Cart"})}),t.length===0?e.jsxs(n.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"text-center",children:[e.jsx(C,{className:"mx-auto h-24 w-24 text-gray-300"}),e.jsx("p",{className:"mt-4 text-xl text-dark-gray",children:"Your cart is empty."}),e.jsx(s,{asChild:!0,className:"mt-6 bg-steel-blue hover:bg-steel-blue/90 text-white",children:e.jsx(k,{to:"/store",children:"Continue Shopping"})})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[e.jsx("div",{className:"lg:col-span-2 space-y-4",children:e.jsx(z,{children:t.map(a=>e.jsx(n.div,{layout:!0,initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:50,transition:{duration:.3}},children:e.jsxs(h,{className:"flex items-center p-4",children:[e.jsx("img",{src:a.product.image,alt:a.product.title,className:"w-24 h-24 object-cover rounded-md border mr-4"}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg text-dark-gray",children:a.product.title}),e.jsx("p",{className:"text-sm text-gray-600",children:a.variant.title}),e.jsxs("div",{className:"flex items-center border border-gray-200 rounded-md w-fit mt-2",children:[e.jsx(s,{onClick:()=>c(a.variant.id,Math.max(1,a.quantity-1)),size:"sm",variant:"ghost",className:"px-2 text-gray-600 hover:bg-gray-100 h-8",children:e.jsx(T,{size:14})}),e.jsx("span",{className:"px-3 text-dark-gray font-medium",children:a.quantity}),e.jsx(s,{onClick:()=>c(a.variant.id,a.quantity+1),size:"sm",variant:"ghost",className:"px-2 text-gray-600 hover:bg-gray-100 h-8",children:e.jsx(_,{size:14})})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-lg text-steel-blue",children:x(a.variant.sale_price_in_cents??a.variant.price_in_cents,a.variant.currency)}),e.jsx(s,{variant:"ghost",size:"icon",className:"text-gray-500 hover:text-brand-red mt-2",onClick:()=>p(a),children:e.jsx(q,{className:"h-4 w-4"})})]})]})},a.variant.id))})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(h,{className:"sticky top-24",children:[e.jsx(Y,{children:e.jsx($,{children:"Order Summary"})}),e.jsx(R,{children:e.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:y})]})}),e.jsxs(F,{className:"flex-col space-y-4",children:[e.jsx(s,{className:"w-full bg-brand-red hover:bg-brand-red/90 text-white",size:"lg",onClick:g,children:"Proceed to Checkout"}),e.jsx(s,{variant:"outline",className:"w-full",onClick:()=>{r(),i({title:"Cart Cleared",description:"All items have been removed from your cart."})},children:"Clear Cart"})]})]})})]})]})})]})};export{S as default};
