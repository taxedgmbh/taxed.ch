import{j as e,ae as Q,ah as L,r as q,ak as U,_ as $,bt as J,aN as H,m as P,E as B,bv as _,bw as M,bx as W,by as Y,ao as G,w as K}from"./vendor-ui-7e3c1e85.js";import{r as o,d as V,e as X}from"./vendor-react-98b53e68.js";import{F as Z}from"./ForumLayout-3d2e528e.js";import{C as g}from"./card-9f228cfb.js";import{B as l}from"./main-0e44faf4.js";import{B as h}from"./badge-309188c1.js";import{T as R}from"./textarea-f1849b39.js";import"./input-efeef55b.js";import"./vendor-helmet-2d03319e.js";import"./vendor-firebase-e71560cb.js";const ee=({topic:I,posts:D=[],onReply:r,onLike:d,onDislike:p,onBookmark:c,onMarkSolution:j,onEdit:x,onDelete:u,onReport:f,loading:T=!1,className:N=""})=>{const[y,A]=o.useState(""),[v,b]=o.useState(null),[C,w]=o.useState(null),[k,S]=o.useState(""),n={id:"1",title:"Quellensteuer refund for expat - urgent help needed",content:"I need help with my Quellensteuer refund. I'm an expat working in Switzerland and I'm not sure about the process. I've been here for 2 years and I think I might be eligible for a refund. Can someone guide me through the process?",author:{id:"1",name:"John Doe",role:"member"},category:{id:"1",name:"Individual Tax Returns",color:"#3B82F6"},tags:["quellensteuer","expat","refund"],status:"active",isSolved:!1,views:156,likes:12,userLiked:!1,userBookmarked:!1,createdAt:"2024-01-15T10:30:00Z",updatedAt:"2024-01-15T14:30:00Z"},z=[{id:"1",content:`To get a Quellensteuer refund, you need to file Form 85 with the Swiss tax authorities. Since you've been here for 2 years, you should be eligible. Here's what you need to do:

1. Download Form 85 from the tax office website
2. Fill out your personal details
3. Attach your salary statements
4. Submit before the deadline (usually March 31st)

I can help you with the specific sections if you need.`,author:{id:"2",name:"Tax Expert",role:"expert",reputation:1250},isSolution:!1,isExpertAnswer:!0,likes:8,dislikes:0,userLiked:!1,userDisliked:!1,createdAt:"2024-01-15T11:00:00Z",updatedAt:"2024-01-15T11:00:00Z"},{id:"2",content:"I went through this process last year. The key is to make sure you have all your documents ready. Don't forget to include your residence permit and any tax certificates from your home country.",author:{id:"3",name:"Sarah Wilson",role:"member",reputation:340},isSolution:!1,isExpertAnswer:!1,likes:3,dislikes:0,userLiked:!0,userDisliked:!1,createdAt:"2024-01-15T12:30:00Z",updatedAt:"2024-01-15T12:30:00Z"}],E=()=>{y.trim()&&(r==null||r(y,v||void 0),A(""),b(null))},t=s=>{w(s.id),S(s.content)},i=s=>{k.trim()&&(x==null||x(s,k),w(null),S(""))},a=s=>{switch(s){case"expert":return"bg-purple-100 text-purple-800 border-purple-200";case"moderator":return"bg-blue-100 text-blue-800 border-blue-200";case"admin":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},m=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return T?e.jsxs("div",{className:`space-y-6 ${N}`,children:[e.jsx(g,{className:"p-6 animate-pulse",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded"})]})}),[...Array(3)].map((s,F)=>e.jsx(g,{className:"p-6 animate-pulse",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-16 bg-gray-200 rounded"})]})},F))]}):e.jsxs("div",{className:`space-y-6 ${N}`,children:[e.jsxs(l,{variant:"ghost",onClick:()=>window.history.back(),className:"mb-4",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Back to Topics"]}),e.jsx(g,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:n.title}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(L,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"font-medium",children:n.author.name}),e.jsx(h,{className:`ml-2 ${a(n.author.role)}`,children:n.author.role})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{className:"w-4 h-4 mr-1"}),m(n.createdAt)]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"w-4 h-4 mr-1"}),n.views," views"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(l,{variant:"ghost",size:"sm",onClick:()=>d==null?void 0:d(n.id),className:"text-gray-500",children:[e.jsx($,{className:"w-4 h-4 mr-1"}),n.likes]}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>c==null?void 0:c(n.id),className:"text-gray-500",children:e.jsx(J,{className:"w-4 h-4"})}),e.jsx(l,{variant:"ghost",size:"sm",children:e.jsx(H,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.tags.map(s=>e.jsxs(h,{variant:"outline",children:["#",s]},s))}),e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{className:"text-gray-700 leading-relaxed",children:n.content})})]})}),e.jsx("div",{className:"space-y-4",children:z.map((s,F)=>e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:F*.1},children:e.jsx(g,{className:`p-6 ${s.isSolution?"border-green-200 bg-green-50":""}`,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx(L,{className:"w-5 h-5 text-gray-500"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:s.author.name}),e.jsx(h,{className:a(s.author.role),children:s.author.role}),s.isExpertAnswer&&e.jsxs(h,{className:"bg-purple-100 text-purple-800",children:[e.jsx(B,{className:"w-3 h-3 mr-1"}),"Expert"]}),s.isSolution&&e.jsxs(h,{className:"bg-green-100 text-green-800",children:[e.jsx(B,{className:"w-3 h-3 mr-1"}),"Solution"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx("span",{children:m(s.createdAt)}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[s.author.reputation," reputation"]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>j==null?void 0:j(s.id),disabled:s.isSolution,children:e.jsx(B,{className:"w-4 h-4"})}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>f==null?void 0:f(s.id),children:e.jsx(_,{className:"w-4 h-4"})})]})]}),C===s.id?e.jsxs("div",{className:"space-y-3",children:[e.jsx(R,{value:k,onChange:O=>S(O.target.value),rows:6,className:"w-full"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{size:"sm",onClick:()=>i(s.id),className:"bg-blue-600 hover:bg-blue-700",children:"Save"}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>w(null),children:"Cancel"})]})]}):e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:s.content})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(l,{variant:"ghost",size:"sm",onClick:()=>d==null?void 0:d(s.id),className:s.userLiked?"text-red-500":"text-gray-500",children:[e.jsx(M,{className:"w-4 h-4 mr-1"}),s.likes]}),e.jsxs(l,{variant:"ghost",size:"sm",onClick:()=>p==null?void 0:p(s.id),className:s.userDisliked?"text-red-500":"text-gray-500",children:[e.jsx(W,{className:"w-4 h-4 mr-1"}),s.dislikes]}),e.jsxs(l,{variant:"ghost",size:"sm",onClick:()=>b(s.id),children:[e.jsx(Y,{className:"w-4 h-4 mr-1"}),"Reply"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>t(s),children:e.jsx(G,{className:"w-4 h-4"})}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>u==null?void 0:u(s.id),className:"text-red-500 hover:text-red-700",children:e.jsx(K,{className:"w-4 h-4"})})]})]})]})})},s.id))}),e.jsxs(g,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:v?"Reply to Post":"Add Your Reply"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(R,{value:y,onChange:s=>A(s.target.value),placeholder:"Share your thoughts and help the community...",rows:6,className:"w-full"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Be respectful and helpful. Remember, this is a professional tax forum."}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{variant:"ghost",onClick:()=>b(null),children:"Cancel"}),e.jsx(l,{onClick:E,disabled:!y.trim(),className:"bg-blue-600 hover:bg-blue-700",children:"Post Reply"})]})]})]})]})]})},me=()=>{const{topicSlug:I}=V(),D=X(),[r,d]=o.useState(null),[p,c]=o.useState([]),[j,x]=o.useState(!0),[u,f]=o.useState(!1),[T,N]=o.useState(!1),y={"quellensteuer-refund-expat-urgent":{id:"1",title:"Quellensteuer refund for expat - urgent help needed",slug:"quellensteuer-refund-expat-urgent",content:`I need help with my Quellensteuer refund. I'm an expat working in Switzerland and I'm not sure about the process. I've been here for 2 years and I think I might be eligible for a refund. Can someone guide me through the process?

I have all my salary statements and my residence permit. I'm just not sure about the forms and deadlines.`,author:{id:"1",name:"John Doe",role:"member"},category:{id:"1",name:"Individual Tax Returns",color:"#3B82F6"},tags:["quellensteuer","expat","refund"],status:"active",isSolved:!1,views:156,likes:12,userLiked:!1,userBookmarked:!1,createdAt:"2024-01-15T10:30:00Z",updatedAt:"2024-01-15T14:30:00Z"}},A=[{id:"1",content:`To get a Quellensteuer refund, you need to file Form 85 with the Swiss tax authorities. Since you've been here for 2 years, you should be eligible. Here's what you need to do:

1. Download Form 85 from the tax office website
2. Fill out your personal details
3. Attach your salary statements
4. Submit before the deadline (usually March 31st)

I can help you with the specific sections if you need. The key is to make sure you have all your documents ready.`,author:{id:"2",name:"Tax Expert",role:"expert",reputation:1250},isSolution:!1,isExpertAnswer:!0,likes:8,dislikes:0,userLiked:!1,userDisliked:!1,createdAt:"2024-01-15T11:00:00Z",updatedAt:"2024-01-15T11:00:00Z"},{id:"2",content:`I went through this process last year. The key is to make sure you have all your documents ready. Don't forget to include your residence permit and any tax certificates from your home country.

Also, make sure to check if your home country has a tax treaty with Switzerland - this can affect your eligibility.`,author:{id:"3",name:"Sarah Wilson",role:"member",reputation:340},isSolution:!1,isExpertAnswer:!1,likes:3,dislikes:0,userLiked:!0,userDisliked:!1,createdAt:"2024-01-15T12:30:00Z",updatedAt:"2024-01-15T12:30:00Z"},{id:"3",content:`Just to add to the expert's answer - the deadline for Form 85 is indeed March 31st, but you can submit it earlier. I submitted mine in February and got my refund by April.

Also, make sure to keep copies of everything you submit. The tax office can be slow to respond, so having records is important.`,author:{id:"4",name:"Mike Johnson",role:"member",reputation:280},isSolution:!1,isExpertAnswer:!1,likes:5,dislikes:0,userLiked:!1,userDisliked:!1,createdAt:"2024-01-15T14:00:00Z",updatedAt:"2024-01-15T14:00:00Z"}];o.useEffect(()=>{x(!0),setTimeout(()=>{const t=y[I];t&&(d(t),c(A),f(t.userLiked),N(t.userBookmarked)),x(!1)},1e3)},[I]);const v=t=>{t===r.id?(f(!u),d(i=>({...i,likes:u?i.likes-1:i.likes+1}))):c(i=>i.map(a=>a.id===t?{...a,likes:a.userLiked?a.likes-1:a.likes+1,userLiked:!a.userLiked}:a))},b=t=>{c(i=>i.map(a=>a.id===t?{...a,dislikes:a.userDisliked?a.dislikes-1:a.dislikes+1,userDisliked:!a.userDisliked}:a))},C=t=>{N(!T)},w=t=>{c(i=>i.map(a=>a.id===t?{...a,isSolution:!0}:{...a,isSolution:!1})),d(i=>({...i,isSolved:!0}))},k=(t,i)=>{const a={id:Date.now().toString(),content:t,author:{id:"current-user",name:"You",role:"member",reputation:100},isSolution:!1,isExpertAnswer:!1,likes:0,dislikes:0,userLiked:!1,userDisliked:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};c(m=>[...m,a])},S=(t,i)=>{c(a=>a.map(m=>m.id===t?{...m,content:i,updatedAt:new Date().toISOString()}:m))},n=t=>{c(i=>i.filter(a=>a.id!==t))},z=t=>{console.log("Report post:",t)},E=()=>{navigator.share?navigator.share({title:r.title,text:r.content,url:window.location.href}):navigator.clipboard.writeText(window.location.href)};return j?e.jsx(Z,{children:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-6"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded mb-6"}),e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((t,i)=>e.jsx("div",{className:"h-24 bg-gray-200 rounded"},i))})]})})}):r?e.jsx(Z,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("div",{className:"flex items-center space-x-4 mb-6",children:e.jsxs(l,{variant:"ghost",onClick:()=>D(`/forum/category/${r.category.id}`),className:"flex items-center",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Back to ",r.category.name]})}),e.jsx(g,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:r.title}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(L,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"font-medium",children:r.author.name}),e.jsx(h,{className:"ml-2 bg-gray-100 text-gray-800",children:r.author.role})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{className:"w-4 h-4 mr-1"}),new Date(r.createdAt).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"w-4 h-4 mr-1"}),r.views," views"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(l,{variant:"ghost",size:"sm",onClick:()=>v(r.id),className:u?"text-red-500":"text-gray-500",children:[e.jsx($,{className:"w-4 h-4 mr-1"}),r.likes]}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>C(r.id),className:T?"text-blue-500":"text-gray-500",children:e.jsx(J,{className:"w-4 h-4"})}),e.jsx(l,{variant:"ghost",size:"sm",onClick:E,children:e.jsx(H,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.tags.map(t=>e.jsxs(h,{variant:"outline",children:["#",t]},t))}),e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:r.content})})]})})]}),e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:e.jsx(ee,{topic:r,posts:p,onLike:v,onDislike:b,onBookmark:C,onMarkSolution:w,onReply:k,onEdit:S,onDelete:n,onReport:z})})]})}):e.jsx(Z,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Topic Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The topic you're looking for doesn't exist."}),e.jsx(l,{onClick:()=>D("/forum"),children:"Back to Forum"})]})})};export{me as default};
